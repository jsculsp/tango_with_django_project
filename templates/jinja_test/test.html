{% extends 'jinja_test/base_bootstrap.html' %}
{% import 'macros/forms.html' as forms with context %}

{% block title %}
    Test
{% endblock %}

{% block body_block %}

    {% set time_now=current_time('%Y-%m-%d %I:%M:%S %p') %}

    This is the page for test purpose.

    {{ br_num(3) }}

    {% for i in 5|times %}
           <a href="{{ url('index') }}" style="color: {{ random_color() }}">url test</a>
           <br>
    {% endfor %}


    {{ br_num(2) }}

    <a href="{{ static('images/rango.jpg') }}">static test</a>

    {{ br_num(3) }}

    {% for i in 5|times %}
        <p style="color: {{ random_color() }}; font-size: 20px;">{{ time_now }}</p>
    {% endfor %}

    {{ br_num(2) }}

    {{ user.username|replace('l', 'Q') }}

    {{ br_num(3) }}

    {{ get_current_time_list() }}

    {{ br_num(2) }}

    filter 把负数转为正数：{{ -3|abs }}

    {{ br_num(3) }}

    attr filter test: {{ user|attr('username') }}

    {{ br_num(3) }}

    capitalize filter test: {{ 'abcde'|capitalize }}

    {{ br_num(3) }}

    count filter test: {{ 'asdfasfdasdf'|count }}

    {{ br_num(3) }}

    default filter test: {{ whatever|d('默认值') }}

    {{ br_num(3) }}

    dictsort filter test1:   <br>
    {% for item in dct|dictsort %}
        {{ item[0] }} = {{ item[1] }}   <br>
    {% endfor %}

    {{ br_num(2) }}

    dictsort filter test2:   <br>
    {% for item in dct|dictsort(by='value') %}
        {{ item[0] }} = {{ item[1] }}   <br>
    {% endfor %}

    {{ br_num(2) }}

    {{ '<b>I want to escape!</b>'|safe }}   <br>
    {{ '<b>OK!</b>'|e|safe }}

    {{ br_num(3) }}

    {{ 102400|filesizeformat }}

    {{ br_num(3) }}

    {{ lst|first }}

    {{ br_num(3) }}

    {{ '23333'|float }}

    {{ br_num(3) }}

    {{ '%s %s'|format('你好！', '你也好！') }}

    {{ br_num(3) }}

    <ul>
    {% for group in pages|groupby('category_id') %}
        <li>
            {{ group.grouper }}
                <ul>
                {% for i in group.list %}
                    <li><a href="{{ i.url }}">{{ i.title }}</a></li>
                {% endfor %}
                </ul>
        </li>
    {% endfor %}
    </ul>

    {{ br_num(2) }}

    {{ '23333'|int }}

    {{ br_num(3) }}

    {{ [1, 2, 3]|join('|') }} <br>
    {{ pages|join(' | ') }}

    {{ br_num(3) }}

    {{ lst|last }}

    {{ br_num(3) }}

    {{ 'letter'|list }}

    {{ br_num(3) }}

    {{ 'LOWER'|lower }}

    {{ br_num(3) }}

    {{ ['cat', 'bird', 'dog']|map('capitalize')|join(' | ') }} <br>
    {{ pages|map(attribute='views')|join(',') }}

    {{ br_num(3) }}

    {{ '中国中国中国中国中国'|replace('中国', '美国', 2)}}

    {{ br_num(3) }}

    <img src="{{ thumbnail('cat.jpg', size=(200, 200)) }}" alt="">

    {{ br_num(3) }}

    {{ 3|add(4) }}

    {{ 'asasd'|random() }}

    {{ br_num(3) }}

    {{ 'abcdefg'|reverse() }}

    {{ br_num(3) }}

    {{ 123.4444|round(3) }}

    {{ br_num(3) }}

    {{ '<b style="color: red; font-size: 38">安全</b>'|safe }}

    {{ br_num(3) }}

    {% for items in 'abcdefg'|slice(4, 'T') %}
        {% for i in items %}
            {{ i }}
        {% endfor %}<br>
    {% endfor %}

    {{ br_num(3) }}

    {% for i in pages|sort(attribute='views') %}
        {{ i.title }} | {{ i.views }} <br>
    {% endfor %}

    {{ br_num(2) }}

    {{ '<a href="www.baidu.com">baidu</a>'|striptags() }}

    {{ br_num(3) }}

    {{ pages|sum(attribute='views') }}

    {{ br_num(3) }}

    {{ 'learn python the hard way'|title }}

    {{ br_num(3) }}

    {{ 'http://www.zhihu.com/?page=2&timestamp=3'|urlencode() }}

    {{ br_num(3) }}

    {{ 'www.zhihu.com'|urlize(target='_blank') }}

    {{ br_num(3) }}

    {{ 333.221144|floatformat(4) }}

    {{ br_num(3) }}

    {{ 'askdlf<br>\njaslk<br>\njfla<br>\nskjdlfkjasl'|linenumbers(autoescape=False) }}

    {{ br_num(3) }}

    {{ 3 is string }}

    {{ br_num(3) }}

    {{ 'linmu' is wonderful }}

    {{ br_num(3) }}

    {% for i in pages|sort(attribute='views') %}
        {{ i['title'] }} | {{ i.views }} <br>
    {% endfor %}

    {{ br_num(3) }}

    {{ 3 is divisibleby 3 }}

    {{ br_num(3) }}

    {{ user is defined }}

    {{ br_num(3) }}

    {{ forms.input('username', value='linmu', type='button') }}

    {{ br_num(3) }}

    {% macro render_dialog(title, class='dialog') -%}
        <div class="{{ class }}">
            <h2>{{ title }}</h2>
            <div class="contents">
                {{ caller() }}
            </div>
        </div>
    {%- endmacro %}

    {% call render_dialog('Hello World') %}
        This is a simple dialog rendered by using a macro and
        a call block.
    {% endcall %}

{% endblock %}
